# VEDA 심화 실습 - 리눅스 프로그래밍  
## 라즈베리파이4(서버)와 Ubuntu PC(클라이언트)를 이용한 TCP 통신 기반 디바이스 제어 실습

---

## 1. 실습 개요

이 실습은 TCP/IP 기반의 서버-클라이언트 통신을 통해 서버(라즈베리파이4)에 연결된 디바이스(LED, 부저, 7세그먼트)를 원격으로 제어하는 것을 목표로 합니다.  
다중 사용자 접속, 자원 관리, 프로세스 간 통신 등 리눅스 기반 시스템 프로그래밍의 다양한 기술을 포함합니다.

---

## 2. 실습 환경

| 항목       | 내용                         |
|------------|------------------------------|
| 서버       | 라즈베리파이4 (Raspberry Pi 4) |
| 클라이언트 | Ubuntu Linux 기반 PC         |

---

## 3. 프로그램 구성 및 동작 방식

### 서버 프로그램 - `tcp_server`

- **데몬 프로세스**로 실행됩니다.
- **TCP/IP 통신**:
  - 다중 사용자 접속을 지원합니다.
  - 최초 접속 사용자만 디바이스 제어 권한을 가집니다.
  - 일정 시간 무응답 시 권한이 회수되며 연결이 종료됩니다.
  - 사용자가 종료 요청 시 연결이 해제됩니다.
  - 메시지 수신 시 "Day" 또는 "Night" 문자열을 회신합니다.
  - 부모 프로세스는 TCP 통신을 담당하며, 자식 프로세스들과 unnamed pipe로 통신합니다.
- **디바이스 제어**:
  - 각 디바이스는 별도의 자식 프로세스로 관리됩니다.
  - **LED**:
    - ON/OFF 및 밝기 조절 (약/중/강)
    - 조도센서 연동 (밝으면 OFF, 어두우면 ON)
  - **부저**:
    - ON/OFF
    - 슈퍼마리오 테마곡 반복 재생
  - **7세그먼트**:
    - 타이머 설정 (0~9초)
    - 타이머 종료 시 부저음 출력

### 클라이언트 프로그램 - `tcp_client`

- 프로그램 실행 시 사용자 ID를 입력받습니다.
- 명령어 입력 순서:
  1. 명령어 종류: `c`(조작), `q`(종료)
  2. LED 세기: `x`(입력 없음), `0`(토글), `1`(약), `2`(중), `3`(강)
  3. 부저 설정: `x`(입력 없음), `0`(정지), `1`(재생)
  4. 타이머 설정: `x`(입력 없음), `0~9`(초)
- 잘못된 명령어는 경고를 출력하며, 서버에는 `userid:C:x:x:x` 형식으로 전송됩니다.
- 정상 전송 시 서버로부터 "Day" 또는 "Night" 메시지를 수신 후 출력합니다.

---

## 4. 빌드 방법

각 프로그램 폴더에 `Makefile`이 존재합니다.

| 명령어       | 설명                                                              |
|--------------|-------------------------------------------------------------------|
| `make`       | 프로그램을 빌드합니다.                                            |
| `make clean` | 오브젝트 파일, 라이브러리, 실행 파일 등을 삭제합니다.             |
| `make kill`  | (**서버 전용**) 데몬 프로세스 `tcp_server`_
